<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Thinkfan-sh by kakwa</title>
    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script src="javascripts/respond.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <!--[if lt IE 8]>
    <link rel="stylesheet" href="stylesheets/ie.css">
    <![endif]-->
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

  </head>
  <body>
      <div id="header">
        <nav>
          <li class="fork"><a href="https://github.com/kakwa/thinkfan-sh">View On GitHub</a></li>
          <li class="downloads"><a href="https://github.com/kakwa/thinkfan-sh/zipball/master">ZIP</a></li>
          <li class="downloads"><a href="https://github.com/kakwa/thinkfan-sh/tarball/master">TAR</a></li>
          <li class="title">DOWNLOADS</li>
        </nav>
      </div><!-- end header -->

    <div class="wrapper">

      <section>
        <div id="title">
          <h1>Thinkfan-sh</h1>
          <p>simple fan control script for thinkpad</p>
          <hr>
          <span class="credits left">Project maintained by <a href="https://github.com/kakwa">kakwa</a></span>
          <span class="credits right">Hosted on GitHub Pages &mdash; Theme by <a href="http://twitter.com/#!/michigangraham">mattgraham</a></span>
        </div>

        <h1>thinkfan-sh</h1>

<p>simple fan control script for thinkpad</p>

<h2>License</h2>

<p>thinkfan-sh is released under the MIT Public License</p>

<h2>Description</h2>

<p><code>thinkfan.sh</code> is just a very simple script that handle fan speed 
on thinkpad computers under GNU/Linux using <code>/proc/acpi/ibm/fan</code> and <code>/proc/acpi/ibm/thermal</code>.</p>

<h2>Disclaimer</h2>

<p>This script plays around your fan speed, so it could be a dangerous for your computer. Use it carefully.</p>

<p>A nice visible temperature widget might be a good idea. </p>

<p>Some tuning might also be good.</p>

<h2>Using the script</h2>

<p>As root:</p>

<div class="highlight"><pre>curl https://raw.github.com/kakwa/thinkfan-sh/master/thinkfan.sh -o /usr/local/bin/thinkfan.sh
vim /usr/local/bin/thinkfan.sh <span class="c">#edit some parameters to your taste</span>
chmod 700 /usr/local/bin/thinkfan.sh
/usr/local/bin/thinkfan.sh
</pre></div>

<p>One way to use it is to simply put it inside <code>/usr/local/bin/</code> and to add <code>/usr/local/bin/thinkfan.sh &amp;</code> 
inside <code>/etc/rc.local</code></p>

<p>On some distros you may need to add <code>thinkpad_acpi.fan_control=1</code> to your kernel comand line 
(hint, look at <code>/boot/grub/grub.cfg</code>)</p>

<h2>Principle</h2>

<p>This script has three "fan states": </p>

<ul>
<li>low (1): lowest fan speed</li>
<li>mid (2): mid fan speed</li>
<li>high (3): highest fan speed </li>
</ul><p>It also four "temperature thresholds":</p>

<ul>
<li>LIMIT_1_UP: temperature where it switches from 1 to 2 while going up</li>
<li>LIMIT_1_DOWN: temperature where it switches from 2 to 1 while going down</li>
<li>LIMIT_2_UP: temperature where it switches from 2 to 3 while going up</li>
<li>LIMIT_2_DOWN: temperature where it switches from 3 to 2 while going down</li>
</ul><p>It works like that:</p>

<ul>
<li>Let say you start at low (1)</li>
<li>your computer heats up, the temperature will go over "LIMIT_1_UP"</li>
<li>the new state is set to mid (2)</li>
<li>it will remain at mid (2) for a while (unless it goes over "LIMIT_2_UP")</li>
<li>the temperature goes under "LIMIT_1_DOWN" (which is lower than "LIMIT_1_UP")</li>
<li>the state comes back to low (1)</li>
</ul><p>"LIMIT_1_UP" is greater than "LIMIT_1_DOWN" in order to prevent the fan to switch every second from low to mid.</p>

<p>The same principal is used to switch between mid (2) and high (3) with "LIMIT_2_UP" and "LIMIT_2_DOWN"</p>

<h2>Tuning the script</h2>

<p>There are several things you can tun inside this script.</p>

<p>The temperature thresholds in Celsius degree:</p>

<ul>
<li>LIMIT_1_UP</li>
<li>LIMIT_1_DOWN</li>
<li>LIMIT_2_UP</li>
<li>LIMIT_2_DOWN </li>
</ul><p>Note that LIMIT_N_DOWN must lower than LIMIT_N_UP</p>

<p>The different fan speeds:</p>

<ul>
<li>STATE_1_LEVEL</li>
<li>STATE_2_LEVEL</li>
<li>STATE_3_LEVEL</li>
</ul><p>The value is an integer between 0 (fan disabled) and 7 (fan at max speed). </p>

<p>Note that there could be less than 8 speeds ( 4 and 5 could mean the same speed for example).</p>

<p>The default values are those used on my thinkpad T60 (the hotter one), I can set STATE_1_LEVEL to 0 on my thinkpad x60</p>

<hr><p>Hope it could help a little to make your thinkpad quieter.</p>
      </section>

    </div>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
    
  </body>
</html>